(function(e){var t=e("#search-form-wrap"),a=false,n=200;var s=function(){a=true};var i=function(e){setTimeout(function(){a=false;e&&e()},n)};e("#nav-search-btn").on("click",function(){if(a)return;s();t.addClass("on");i(function(){e(".search-form-input").focus()})});e(".search-form-input").on("blur",function(){s();t.removeClass("on");i()});e("body").on("click",function(){e(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var a=e(this),n=a.attr("data-url"),s=encodeURIComponent(n),i="article-share-box-"+a.attr("data-id"),o=a.offset();if(e("#"+i).length){var r=e("#"+i);if(r.hasClass("on")){r.removeClass("on");return}}else{var l=['<div id="'+i+'" class="article-share-box">','<input class="article-share-input" value="'+n+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+s+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+s+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+s+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+s+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");var r=e(l);e("body").append(r)}e(".article-share-box.on").hide();r.css({top:o.top+25,left:o.left}).addClass("on")}).on("click",".article-share-box",function(e){e.stopPropagation()}).on("click",".article-share-box-input",function(){e(this).select()}).on("click",".article-share-box-link",function(e){e.preventDefault();e.stopPropagation();window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")});e(".article-entry").each(function(t){e(this).find("img").each(function(){if(e(this).parent().hasClass("fancybox"))return;var t=this.alt;if(!e(this).hasClass("no-fancybox")){if(t)e(this).after('<span class="caption">'+t+"</span>");e(this).wrap('<a href="'+this.src+'" title="'+t+'" class="fancybox"></a>')}});e(this).find(".fancybox").each(function(){e(this).attr("rel","article"+t)})});if(e.fancybox){e(".fancybox").fancybox()}var o=e("#container"),r=false,l=200;var c=function(){r=true};var f=function(){setTimeout(function(){r=false},l)};e("#main-nav-toggle").on("click",function(){if(r)return;c();o.toggleClass("mobile-nav-on");f()});e("#wrap").on("click",function(){if(r||!o.hasClass("mobile-nav-on"))return;o.removeClass("mobile-nav-on")});var h;var u="name";var p=true;if(e(".spell-level").length!==0){u="spell_level";p=false}var d=e(".changes-list-wrapper").isotope({itemSelector:".changes-list",layoutMode:"masonry",filter:function(){var t=e(this).find(".name").text()+e(this).find(".spell-level").text();return h?t.match(h):true},getSortData:{name:".name",spell_level:".spell-level"},sortBy:u,sortAscending:p});var v=e(".changes-list-filter-input").keyup(debounce(function(){h=new RegExp(v.val(),"gi");d.isotope()},200));e(".sort-by-button-group").on("click","button",function(){var t=e(this).attr("data-sort-value");var a=true;var n=e(this).hasClass("ascending");e(".sort-by-button-group button").removeClass("is-checked").removeClass("ascending").removeClass("descending");if(n){a=false;e(this).removeClass("ascending");e(this).addClass("descending");console.log("that")}else{console.log("this");e(this).removeClass("descending");e(this).addClass("ascending")}e(this).addClass("is-checked");d.isotope({sortBy:t,sortAscending:a})})})(jQuery);function debounce(e,t){var a;return function n(){if(a){clearTimeout(a)}function n(){e();a=null}a=setTimeout(n,t||100)}}